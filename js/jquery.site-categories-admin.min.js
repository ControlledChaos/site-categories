/*! Site Categories - v1.0.91
 * https://premium.wpmudev.org/project/site-categories/
 * Copyright (c) 2015; * Licensed GPLv2+ */
function UrlExists(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),404!=e.status}function getUrlParams(t){t||(t=window.location.search);var e={},i=(t.split("?")[1]||"").split("&");for(var a in i)i.hasOwnProperty(a)&&(paramParts=i[a].split("="),e[paramParts[0]]=decodeURIComponent(paramParts[1]||""));return e}(function(t){uploadOptionBCAT={init:function(){var e,i="",a="",s="";t("input#bcat_image_upload").on("click",function(o){if("thickbox"==site_categories_data.image_view)s||(s=getUrlParams()),s.post&&(i=s.post),a=t(this).attr("rel"),dest_field_src="bcat_image_src",tb_show("","media-upload.php?type=image&amp;post_id=0&amp;TB_iframe=1&amp;width=640&amp;height=698"),e=setInterval(function(){jQuery("#TB_iframeContent").contents().find(".savesend .button").val("Use this image")},2e3);else if("new_media"==site_categories_data.image_view){var n;o.preventDefault(),n=wp.media.frames.file_frame=wp.media({title:site_categories_data.image_view_title_text,button:{text:site_categories_data.image_view_button_text},multiple:!1}),n.on("select",function(){attachment=n.state().get("selection").first().toJSON(),t("input#bcat_image_id").val(attachment.id);var e="";void 0!=attachment.sizes.full&&void 0==attachment.sizes.thumbnail&&(attachment.sizes.thumbnail=attachment.sizes.full),e=attachment.sizes.thumbnail.url,e.length>0&&(t("img#bcat_image_src").attr("src",e),t("img#bcat_image_src").show(),t("input#bcat_image_upload").hide(),t("input#bcat_image_remove").show())}),n.open()}return!1}),t("input#bcat_image_remove").on("click",function(){t("input#bcat_image_upload").show(),t("input#bcat_image_remove").hide(),t("input#bcat_image_id").val("");var e=t("img#bcat_image_src").attr("rel");return t("img#bcat_image_src").attr("src",e),!1}),window.original_send_to_editor=window.send_to_editor,window.send_to_editor=function(i){var a=/(^.*\.jpg|jpeg|png|gif|ico*)/gi;clearInterval(e),itemurl=t(i).attr("href");var s=t(i).find("img").attr("class").split(/\s+/);if(s)for(var o="",n=0;s.length>n;n++){var r=s[n];if(!(9>r.length)&&"wp-image-"==r.substring(0,9)){o=r.substring(9,r.length),t("input#bcat_image_id").val(o);break}}UrlExists(itemurl)&&itemurl.match(a)&&(t("img#bcat_image_src").attr("src",itemurl),t("img#bcat_image_src").show(),t("input#bcat_image_upload").hide(),t("input#bcat_image_remove").show()),tb_remove()}}},t(document).ready(function(){uploadOptionBCAT.init(),t("select#site-categories-show-style").change(function(){"grid"==t(this).val()?(t(".site-categories-non-grid-options").hide(),t(".site-categories-accordion-options").hide(),t(".site-categories-grid-options").show()):"accordion"==t(this).val()?(t(".site-categories-non-accordion-options").hide(),t(".site-categories-grid-options").hide(),t(".site-categories-accordion-options").show()):"select-flat"==t(this).val()||"select-nested"==t(this).val()?t(".site-categories-non-select-options").hide():(t(".site-categories-grid-options").hide(),t(".site-categories-accordion-options").hide(),t(".site-categories-non-grid-options").show(),t(".site-categories-non-select-options").show())})})})(jQuery);